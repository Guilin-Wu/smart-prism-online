# Smart-Prism
智慧棱镜系统
这是一个为您量身定制的 `README.md` 文档。它涵盖了项目简介、核心功能、技术栈、使用说明、数据格式要求以及 AI 模块的特别说明。

您可以将以下内容保存为项目根目录下的 `README.md` 文件。

-----

# 🎓 智慧棱镜系统 (Smart-Prism)

> **作者**: G.L.Wu  
> **版本**: 2.0.0 (AI 增强版)

这是一个基于 Web 的纯前端成绩分析工具，专为教师和年级组长设计。它无需安装服务器，无需上传数据到云端，直接在浏览器中通过解析 Excel 文件即可生成深度的多维度成绩报告。

最新版本集成了 **DeepSeek AI**，提供智能化的教学诊断、学生个性化分析及历史对话记录功能。

-----

## ✨ 核心亮点

  * **🛡️ 数据隐私安全**: 所有数据解析和处理均在 **本地浏览器** 完成，不会上传至任何第三方服务器。
  * **🚀 极速响应**: 采用原生 JavaScript 开发，配合 ECharts 高性能渲染，秒级处理千人级数据。
  * **🤖 AI 智能顾问**: 集成 DeepSeek V3/R1 模型，支持“教师教学指导”、“学生小题诊断”、“弱科分析”等多种模式，并支持流式输出与 Markdown/LaTeX 渲染。
  * **🖨️ 专业打印报告**: 内置自定义打印引擎，支持 A4 标准排版，完美还原图表、公式和分析文本。
  * **📊 全维度分析**: 涵盖从班级整体到学生个体，从总分趋势到单题知识点的 14 个分析模块。

-----

## 🛠️ 技术栈

  * **核心逻辑**: Vanilla JavaScript (ES6+)
  * **图表库**: [Apache ECharts](https://echarts.apache.org/) (5.4.3)
  * **Excel 解析**: [SheetJS (xlsx)](https://sheetjs.com/)
  * **Markdown 渲染**: [Marked.js](https://github.com/markedjs/marked)
  * **数学/化学公式**: [KaTeX](https://katex.org/) + [mhchem](https://www.google.com/search?q=https://github.com/mhchem/mhchem)
  * **样式**: CSS3 (Flexbox/Grid), 响应式设计

-----

## 📦 功能模块概览

系统包含 14 个核心模块，分为四大类：

### 1\. 宏观分析

  * **📈 班级整体分析**: 关键指标 (KPI)、分数段分布、班级对比、全科箱形图。
  * **📝 试卷科目分析**: 试卷难度系数、区分度分析、难度-区分度四象限图。
  * **⚖️ 全科均衡分析**: 统计学生不及格科目数量分布，定位“偏科”群体。
  * **🌊 成绩分布变动**: 通过桑基图 (Sankey) 可视化展示两次考试间的排名分层流动。

### 2\. 微观诊断

  * **👩‍🎓 学生个体报告**: 学生个人雷达图、进退步分析、各科排名追踪（支持打印）。
  * **🎯 单科成绩分析**: 单科 Top/Bottom 榜单、单科分数分布。
  * **📊 临界生分析**: 快速筛选“差一点及格/优秀”的学生，支持自定义分数线范围。
  * **📉 偏科诊断分析**: 基于 Z-Score (标准分) 的四象限诊断图，识别“高分低能”或“潜力股”。
  * **🌡️ 学科关联矩阵**: 热力图展示各学科成绩之间的相关性系数。

### 3\. 深度追踪

  * **🚀 成绩趋势对比**: 对比两次考试的班排、年排、分数变化，生成进退步名单。
  * **📈 多次考试分析**: 浏览器本地存储历次考试数据，绘制学生长期的成绩变化曲线（支持按科目筛选）。

### 4\. 精细化与 AI

  * **🔬 学科小题分析**:
      * 导入小题分明细，自动计算各大题/小题的得分率与区分度。
      * **双向诊断**: “题目-学生”四象限图，定位知识点漏洞。
      * **分层对比**: 自动将学生分层 (Top/Bottom)，对比不同层次学生的知识点掌握率。
  * **🤖 AI 智能分析 (DeepSeek)**:
      * **教师视角**: 自动生成班级/年级教学诊断报告，指出共性薄弱点。
      * **学生视角**: 生成个性化学习建议、错题归因及复习策略。
      * **历史记录**: 右侧抽屉式历史栏，自动保存对话，支持回看与删除。

-----

## 🚀 快速开始

1.  **下载项目**: 克隆仓库或下载 ZIP 包。
2.  **运行**: 直接双击 `index.html` 在浏览器中打开（推荐使用 Chrome 或 Edge）。
3.  **数据准备**: 准备符合格式的 Excel 文件（见下文）。
4.  **导入数据**: 点击左侧边栏底部的“导入本次成绩”。

-----

## 📄 数据格式要求

### 1\. 基础成绩表 (用于模块 1-12, 14)

Excel 表头需包含以下关键列（顺序不限）：

  * `姓名`
  * `班级`
  * `语文`, `数学`, `英语`... (各科目名称)
  * *(可选)* `班次` (班级排名), `校次` (年级排名) - *系统也可自动计算*

**示例:**
| 姓名 | 班级 | 语文 | 数学 | 英语 | 物理 | ... |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 张三 | 高一1班 | 110 | 120 | 105 | 88 | ... |

### 2\. 小题分明细表 (用于模块 13)

每个 **Sheet (工作表)** 代表一个科目。表头需包含：

  * `姓名`
  * `班级`
  * `总分`
  * `1`, `2`, `3`... (题号作为列名)

**示例:**
| 姓名 | 班级 | 总分 | 1 | 2 | 3 | ... |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 李四 | 高一2班 | 85 | 3 | 3 | 0 | ... |

-----

## 🤖 AI 模块配置说明

本系统使用 **DeepSeek API** 进行智能分析。

1.  **获取 Key**: 请前往 [DeepSeek 开放平台](https://platform.deepseek.com/) 申请 API Key。
2.  **配置**: 在系统“模块十四：AI 智能分析”中输入 Key 并点击保存。
      * *注意：Key 仅保存在您的浏览器 LocalStorage 中，绝对不会上传至任何服务器。*
3.  **使用**:
      * 选择分析对象（学生或班级/年级）。
      * 选择模式（如“教师教学指导”或“小题深度诊断”）。
      * 点击“开始 AI 分析”。

-----

## 📝 常见问题 (FAQ)

  * **Q: 为什么化学公式显示不出来？**
      * A: 系统已内置 `mhchem` 支持。AI 会自动生成 LaTeX 格式（如 `$\ce{H2O}$`），请确保网络能加载 CDN 资源。
  * **Q: 打印时排版乱了怎么办？**
      * A: 请使用系统内置的“🖨️ 打印报告”按钮，它会调用专用的打印 CSS 样式。建议在打印预览中将“背景图形”勾选上以获得最佳视觉效果。
  * **Q: 怎么清除历史记录？**
      * A: 在 AI 分析模块右侧点击“🕒 历史”悬浮按钮，打开侧边栏，点击底部的“清空所有记录”即可。

-----
